/* =========================
   Catppuccin Color Variables
   ========================= */
:root {
  /* Main background and accent colors */
  --ctp-bg: #1e2030; /* mantle */
  --ctp-bg-opaque: #1e2030;
  --ctp-bg-darker: #181926;
  --ctp-bg-hover: #24273a;
  --ctp-bg-focus: #494d64;

  --ctp-border-color: #c6a0f620;
  --ctp-close-bg: #24273a;
  --ctp-close-bg-hover: #c6a0f6;

  --ctp-text: #cad3f5;
  --ctp-text-muted: #b8c0e0;
  --ctp-text-disabled: #a5adcb;

  --ctp-accent: #c6a0f6;          /* mauve */
  --ctp-accent-hover: #f5bde6;    /* pink for hover */
  --ctp-critical: #ed8796;        /* red */

  --ctp-radius: 10px;

  /* Shadows and borders */
  --ctp-shadow: 0 4px 24px #18192640;
  --notification-shadow: 0 0 0 1px #1819264d,
    0 1px 3px 1px #181926b3, 0 2px 6px 2px #1819264d;

  --border: 1px solid var(--ctp-border-color);
  --border-radius: var(--ctp-radius);

  /* Font sizes */
  --font-size-body: 15px;
  --font-size-summary: 16px;          /* summary / group header */
  --font-size-title: 1.25rem;         /* widget / mpris title */

  /* Transitions */
  --hover-transition: background 0.15s ease-in-out;
  --group-collapse-transition: opacity 200ms ease-in-out, background 0.15s ease-in-out;

  /* Icon sizes */
  --notification-icon-size: 64px;
  --notification-app-icon-size: 21px;
  --notification-group-icon-size: 32px;
}

/* =========================
   Global Resets / Base
   ========================= */
notificationwindow, blankwindow, .floating-notifications {
  background: transparent;
}

.control-center,
.notification,
.widget,
.notification-group {
  border-radius: var(--ctp-radius);
  color: var(--ctp-text);
}

.control-center label,
.notification label,
.widget label,
.notification-group label {
  /* Unify label size unless explicitly overridden */
  font-size: var(--font-size-body);
  color: var(--ctp-text);
}

/* =========================
   Floating Notification Window Margin
   ========================= */
.floating-notifications,
notificationwindow {
  margin: 4px;
  /* If only top-right, use: margin: 4px 4px 0 0; */
}

/* Optional: add subtle shadow to floating notifications */
.floating-notifications .notification {
  box-shadow: var(--notification-shadow);
}

/* =========================
   Control Center Styling
   ========================= */
.control-center {
  background: var(--ctp-bg);
  color: var(--ctp-text);
  border-radius: var(--ctp-radius);
  box-shadow: var(--ctp-shadow);
  padding: 0; /* revert to avoid total height increase */
}

/* Notification list background inside control center */
.control-center .control-center-list {
  background: var(--ctp-bg);
}

/* Placeholder opacity for empty notification list */
.control-center .control-center-list-placeholder {
  opacity: 0.5;
}

/* =========================
   Notification Styling
   ========================= */
.notification-row {
  background: none;
  outline: none;
}

.notification-row:focus {
  background: var(--ctp-bg-focus);
}

/* Provide outer breathing room around the card */
/* Revert padding to 0 to prevent vertical overflow */
.notification-row .notification-background {
  padding: 0;
  background: transparent;
  box-shadow: none;
  border-radius: var(--ctp-radius);
}

/* Popup notification card */
.notification-row .notification-background .notification {
  border-radius: var(--ctp-radius);
  border: var(--border);
  background: var(--ctp-bg);
  transition: var(--hover-transition);
  color: var(--ctp-text);
  padding: 6px 10px; /* Compact padding */
}

/* Notification card inside control center */
.control-center .control-center-list .notification {
  box-shadow: var(--notification-shadow);
  background: var(--ctp-bg);
  color: var(--ctp-text);
  border-radius: var(--ctp-radius);
  padding: 6px 10px; /* Compact padding */
  border: none; /* revert to avoid +2px vertical growth per item */
}

/* Default/alt action hit areas */
.control-center .control-center-list .notification .notification-default-action,
.control-center .control-center-list .notification .notification-action,
.notification-row .notification-background .notification .notification-default-action,
.notification-row .notification-background .notification .notification-action {
  transition: var(--hover-transition);
  color: var(--ctp-text);
  padding: 6px 0; /* Compact padding */
  background: transparent;
  border: none;
  border-radius: var(--ctp-radius);
}

.control-center .control-center-list .notification .notification-default-action:hover,
.control-center .control-center-list .notification .notification-action:hover,
.notification-row .notification-background .notification .notification-default-action:hover,
.notification-row .notification-background .notification .notification-action:hover {
  background-color: var(--ctp-bg-hover);
}

/* =========================
   Notification Content
   ========================= */
.notification-row .notification-background .notification .notification-default-action .summary {
  font-size: var(--font-size-summary);
  font-weight: bold;
  color: var(--ctp-text);
  margin-bottom: 4px;
}

.notification-row .notification-background .notification .notification-default-action .body {
  font-size: var(--font-size-body);
  color: var(--ctp-text);
  margin-top: 2px;
  margin-bottom: 2px;
}

.notification-row .notification-background .notification .notification-default-action .time {
  font-size: var(--font-size-body);
  color: var(--ctp-text-disabled);
  margin-top: 2px;
}

/* Images / icons */
.notification-row .notification-background .notification .notification-default-action .notification-content .image {
  -gtk-icon-filter: none;
  -gtk-icon-size: var(--notification-icon-size);
  border-radius: 100px;
  margin: 4px;
}

.notification-row .notification-background .notification .notification-default-action .notification-content .app-icon {
  -gtk-icon-filter: none;
  -gtk-icon-size: var(--notification-app-icon-size);
  margin: 6px;
}

/* Critical notification border */
.notification-row .notification-background .notification.critical {
  border: 2px solid var(--ctp-critical);
}

/* =========================
   Notification Group Styling
   ========================= */
.notification-group {
  background: var(--ctp-bg);
  border-radius: var(--ctp-radius);
  transition: var(--group-collapse-transition);
  padding: 12px 10px;   /* Inner spacing */
  margin-bottom: 12px;  /* Space between groups */
  border: var(--border); /* visual separation; padding already reduced */
}

.notification-group:hover,
.notification-group:focus {
  background: var(--ctp-bg-hover);
}

/* Group header area: unify with summary */
.notification-group .notification-group-headers {
  margin: 0 8px 6px 8px;
  color: var(--ctp-text);
}

.notification-group .notification-group-headers .notification-group-icon {
  color: var(--ctp-text);
  -gtk-icon-size: var(--notification-group-icon-size);
}

.notification-group .notification-group-headers .notification-group-header,
.notification-group .notification-group-headers .notification-group-header label {
  font-size: var(--font-size-summary);
  font-weight: bold;
  color: var(--ctp-text);
  line-height: 1.25;
}

/* Group action buttons align with other buttons */
.notification-group .notification-group-buttons {
  margin: 0 8px 6px 8px;
}

.notification-group .notification-group-buttons > button {
  min-width: 32px;
  min-height: 32px;
  font-size: 1rem;
  padding: 0 12px;
  border-radius: var(--ctp-radius);
  color: var(--ctp-text);
  background: var(--ctp-bg-darker);
  transition: var(--hover-transition);
}

.notification-group .notification-group-buttons > button:hover {
  background: var(--ctp-accent);
  color: var(--ctp-bg-opaque);
}

/* Group internal children spacing */
.notification-group .notification-group-children,
.notification-group .notification-row {
  background: transparent;
  border-radius: var(--ctp-radius);
  padding: 4px 0;       /* Vertical rhythm */
  margin-bottom: 4px;   /* Space between notifications */
}

/* Collapsed state */
.notification-group.collapsed {
  opacity: 0.9;
}

.notification-group.collapsed.not-expanded {
  opacity: 0.6;
}

.notification-group.collapsed .notification-row .notification {
  background-color: var(--ctp-bg-darker);
}

/* =========================
   Button Size & Spacing Fix
   ========================= */
.close-button {
  background: var(--ctp-close-bg);
  color: var(--ctp-accent);
  border-radius: 100%;
  min-width: 32px;
  min-height: 32px;
  font-size: 1.2rem;
  border: none;
  transition: var(--hover-transition);
  padding: 0;
  margin: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.close-button:hover {
  background: var(--ctp-close-bg-hover);
  color: var(--ctp-bg-opaque);
}

/* Group close button spacing */
.notification-group .notification-group-close-button .close-button {
  margin: 6px 10px;
}

/* Widget title button (top right of widget) */
.widget-title > button {
  min-width: 32px;
  min-height: 32px;
  font-size: 1.05rem;
  padding: 0 12px;
  margin-left: 8px;
  border-radius: var(--ctp-radius);
  transition: var(--hover-transition);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--ctp-text);
  background: var(--ctp-bg-darker);
}
.widget-title > button:hover {
  background: var(--ctp-accent-hover);
  color: var(--ctp-bg-opaque);
}

/* Notification action buttons (if any) */
.notification-row .notification-background .notification .notification-action > button,
.control-center .control-center-list .notification .notification-action > button {
  min-width: 32px;
  min-height: 32px;
  font-size: 1rem;
  padding: 0 12px;
  border-radius: var(--ctp-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--ctp-text);
  background: var(--ctp-bg-darker);
  transition: var(--hover-transition);
}
.notification-row .notification-background .notification .notification-action > button:hover,
.control-center .control-center-list .notification .notification-action > button:hover {
  background: var(--ctp-accent);
  color: var(--ctp-bg-opaque);
}

/* =========================
   Widget Styling
   ========================= */
.widget {
  background: var(--ctp-bg);
  color: var(--ctp-text);
  border-radius: var(--ctp-radius);
  margin: 8px;
  padding: 8px;
  border: var(--border);
}

/* Widget title label */
.widget-title > label {
  color: var(--ctp-accent);
  font-size: var(--font-size-title);
  font-weight: bold;
  margin-right: 8px;
}

/* DND widget label */
.widget-dnd label {
  color: var(--ctp-text);
  font-weight: bold;
  font-size: 1.05rem;
  margin-right: 8px;
}

/* DND switch look and feel */
.widget-dnd switch {
  border-radius: var(--ctp-radius);
  margin-left: 8px;
}
.widget-dnd switch slider {
  border-radius: var(--ctp-radius);
}

/* Label widget */
.widget-label > label {
  font-size: 1.1rem;
}

/* Widget buttons */
.widget-buttons-grid flowboxchild > button {
  background: var(--ctp-bg-darker);
  color: var(--ctp-accent);
  border-radius: var(--ctp-radius);
  transition: var(--hover-transition);
}
.widget-buttons-grid flowboxchild > button:hover {
  background: var(--ctp-accent);
  color: var(--ctp-bg-opaque);
}

/* =========================
   MPRIS (Music Player) Widget Styling
   ========================= */
:root {
  --mpris-album-art-overlay: rgba(0, 0, 0, 0.55);
  --mpris-button-hover: rgba(0, 0, 0, 0.5);
  --mpris-album-art-icon-size: 96px;
  --mpris-album-art-shadow: 0px 0px 10px rgba(0, 0, 0, 0.75);
}

.widget-mpris {
  padding: 0;
}

.widget-mpris .widget-mpris-player {
  margin: 12px 16px;
  border-radius: var(--ctp-radius);
  box-shadow: var(--mpris-album-art-shadow);
  background: var(--ctp-bg);
  color: var(--ctp-text);
}

.widget-mpris .widget-mpris-player .mpris-background {
  filter: blur(10px);
}

.widget-mpris .widget-mpris-player .mpris-overlay {
  padding: 16px;
  background-color: var(--mpris-album-art-overlay);
}

.widget-mpris .widget-mpris-player .mpris-overlay .widget-mpris-title {
  color: var(--ctp-text);
  font-weight: bold;
  font-size: var(--font-size-title);
}

.widget-mpris .widget-mpris-player .mpris-overlay .widget-mpris-subtitle {
  color: var(--ctp-text-muted);
  font-size: 1.1rem;
}

.widget-mpris .widget-mpris-player .mpris-overlay > box > button:hover {
  background: var(--mpris-button-hover);
}
